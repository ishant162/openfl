syntax = "proto3";

service Director {
    //Envoy RPCs
    rpc ConnectEnvoy(SendConnectionRequest) returns (RequestAccepted) {}
    rpc WaitExperiment(WaitExperimentRequest) returns (WaitExperimentResponse) {}

    //Experiment RPCs
    rpc SetNewExperiment(FileRequest) returns (FileResponse) {}
}

message SendConnectionRequest {
    string envoy_name = 1;
}

message RequestAccepted {
    bool accepted = 1;
}

message WaitExperimentRequest {
    string collaborator_name = 1;
}

message WaitExperimentResponse {
    string experiment_name = 1;
}

message FileRequest {
    string file_name = 1;
    bytes file_data = 2;
    string experiment_name = 3;
}

message FileResponse {
    bool status = 1;
}